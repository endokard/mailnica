#System update
apt-get upgrade
apt-get update

#Non-root user creaton
useradd NEW_USER
passwd NEW_USER

#SSH service configuration -> mailnica/ssh/sshd_conf
vi /etc/sshd_conf
port 27
PermitRootLogin no
AllowAgentForwarding no
AllowTcpForwarding no

#Add new user to sudoers
vi /etc/sudoers

#restart sshd service
systemctl restart sshd

#create mailnica dir
mkdir /etc/mailnca

########
#POSTFIX
########

#install postfix
apt-get install postfix mailutils
systemctl enable postfix

#postfix configuration
#check /mailnica/postfix/

systemctl start postfix

########
########
########

apt install nginx certbot python3-certbot-nginx

########
#NGINX
########

mkdir /var/www/mailnica.com
wget -O /etc/nginx/sites-avaliable/mailnica.com https://raw.githubusercontent.com/endokard/mailnica/main/nginx/sites-avaliable/mailnica.com
ln -s /etc/nginx/sites-available/mailnica.com /etc/nginx/sites-enabled/mailnica.com

systemctl enable nginx
########
#CERTBOT
########
certbot certonly --webroot -w /var/www/mailnica.com -d mailnica.com
